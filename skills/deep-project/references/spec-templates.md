# Spec File Templates

## spec.md Format

Each split directory contains a `spec.md` that captures requirements and context for /deep-plan.

```markdown
# {Split Title}

## Context Files

- **Original Requirements**: `../{original_requirements_filename}`
- **Project Manifest**: `../project-manifest.md`

> Note: This spec is a snapshot of requirements at time of splitting.
> Refer to original file for most current version.

## Dependencies

### Structured
- **Upstream**: {None | comma-separated list of split directories}
- **Downstream**: {comma-separated list of split directories}
- **Dependency Types**: {models | APIs | schemas | patterns | none}

### Dependency Details
| Upstream Split | Artifact Needed | Status |
|----------------|-----------------|--------|
| {split_dir} | {interface-contract | schema | decision | library} | to-be-defined |

### Context
{Prose explanation of dependencies - why they exist, what needs to be coordinated}

## Requirements

{Verbatim copy of relevant portion from original requirements}

## Interview Context

{Clarifications from /deep-project interview relevant to this split}

- Key decisions made:
  - {decision 1}
  - {decision 2}
- Constraints identified:
  - {constraint 1}
- Open questions:
  - {question that /deep-plan should address}

## Notes for /deep-plan

{Specific considerations for planning this split}

- Suggested approach: {high-level guidance}
- Potential challenges: {things to watch for}
- Related patterns: {existing code or conventions to follow}
```

## project-manifest.md Format

The manifest provides an overview of all splits and their relationships.

```markdown
# Project: {Name}

Generated by /deep-project from: {input_filename}

## Splits

| Order | Directory | Status | Dependencies | Parallel Group |
|-------|-----------|--------|--------------|----------------|
| 1 | 01-name/ | pending | none | A |
| 2 | 02-name/ | pending | 01-name | - |
| 3 | 03-name/ | pending | none | A |
| 4 | 04-name/ | pending | 02-name, 03-name | - |

## Parallelism Hints

{Explanation of which splits can run in parallel}

- **Group A**: 01-name and 03-name are independent, can run in parallel
- **Sequential**: 02-name depends on 01-name, must follow it
- **Final**: 04-name requires both 02-name and 03-name, run last

## Execution Order

### 1. {Split Name}
```
/deep-plan @01-name/spec.md
```
- Prerequisites: {none | what to review first}
- After completion: {what to note for downstream}

### 2. {Split Name}
```
/deep-plan @02-name/spec.md
```
- Prerequisites: Review 01-name implementation for {specific artifacts}
- After completion: {what to note for downstream}

{Continue for all splits...}

## Cross-Cutting Context

{Decisions and context that affect all splits}

- Technology stack: {languages, frameworks}
- Coding conventions: {patterns to follow}
- Shared infrastructure: {databases, services}

## What to Pass Forward

After Split N -> Split M:
- {What information to carry forward}
- {Artifacts to reference}
- {Decisions that affect downstream}
```

## Single-Unit Manifest Example

For non-splittable projects, the manifest is simplified:

```markdown
# Project: {Name}

Generated by /deep-project from: {input_filename}

## Splits

| Order | Directory | Status | Dependencies | Parallel Group |
|-------|-----------|--------|--------------|----------------|
| 1 | 01-project-name/ | pending | none | - |

## Execution Order

### 1. {Project Name}
```
/deep-plan @01-project-name/spec.md
```
- Prerequisites: none
- After completion: ready for /deep-implement

## Interview Summary

{Key clarifications discovered during interview that inform planning}

- Scope: {size and complexity assessment}
- Key decisions: {choices made during interview}
- Open questions: {things for /deep-plan to address}
```

## Naming Conventions

**Directory names:**
- Format: `NN-kebab-case/` (two-digit prefix)
- Strict regex: `^[a-z0-9]+(-[a-z0-9]+)*$`
- Examples: `01-auth/`, `02-user-management/`, `03-api-gateway/`

**Display names:**
- Kebab-case converted to Title Case
- `01-user-management` -> "User Management"
- Used in headings and descriptions

**Index calculation:**
- Use `max(existing_indices) + 1`, not `len()`
- Handles gaps from deleted directories
- First directory is always `01-`

## Dependency Status Values

| Status | Meaning |
|--------|---------|
| to-be-defined | Interface/artifact not yet specified |
| defined | Interface specified, not implemented |
| implemented | Fully implemented and available |

## Dependency Types

| Type | Description | Example |
|------|-------------|---------|
| interface-contract | API shape, function signatures | "UserService.getById() returns User" |
| schema | Database or data structure | "users table with id, email, name" |
| decision | Architectural choice | "Use JWT for auth tokens" |
| library | Shared code or utilities | "Common error handling module" |
